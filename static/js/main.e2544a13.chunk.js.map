{"version":3,"sources":["reducers/stopSearchReducer.js","providers/stopSearchProvider.js","services/client.js","services/linesDiscovery.js","services/estimatedTimetable.js","pages/StopSearch/VehicleModeFilter.js","pages/StopSearch/LineSelection.js","pages/StopSearch/StopSelection.js","pages/StopSearch/DateSelection.js","services/stopMonitoring.js","pages/StopSearch/SearchButton.js","pages/StopSearch/Timer.js","pages/StopSearch/Results.js","pages/StopSearch.js","App.js","serviceWorker.js","index.js"],"names":["stopSearchReducer","state","action","type","lines","data","LinesDelivery","AnnotatedLineRef","map","line","LineRef","LineName","RouteType","Extension","Object","objectSpread","stops","stopsIds","ServiceDelivery","EstimatedTimetableDelivery","Etd","EstimatedJourneyVersionFrame","Ejvf","EstimatedVehicleJourney","Evj","DirectionRef","VehicleMode","EstimatedCalls","Ec","StopPointRef","push","StopPointName","DestinationName","mode","checked","stop","date","results","StopMonitoringDelivery","MonitoredStopVisit","visit","journey","MonitoredVehicleJourney","call","MonitoredCall","IsRealTime","ExpectedArrivalTime","ExpectedDepartureTime","maxStopArrivals","Error","StopSearchContext","createContext","StopSearchProvider","_ref","children","initialState","_useReducer","useReducer","_useReducer2","slicedToArray","context","dispatch","react_default","a","createElement","Provider","value","api","axios","create","baseURL","client","route","params","get","auth","username","then","res","catch","error","alert","linesDiscovery","asyncToGenerator","regenerator_default","mark","_callee","$params","wrap","_context","prev","next","abrupt","sent","_x","apply","this","arguments","estimatedTimetable","VehicleModeFilter","_useContext","useContext","handleChange","event","target","FormLabel","component","FormControlLabel","control","Checkbox","bus","onChange","color","label","tram","LineSelection","_useContext$state","options","filter","find","element","selectStyles","menu","styles","zIndex","react_select_browser_esm","selected","StopSelection","select","length","DateSelection","Grid","container","justify","spacing","key","item","xs","material_ui_pickers_esm","utils","DateFnsUtils","locale","id","ampm","variant","Button","onClick","Date","index_es","icon","faUndo","stopMonitoring","MonitoringRef","StartTime","MaximumStopVisits","Timer","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","dateUpdate","setState","visibleDate","calculate","diff","moment","finishedText","utc","format","intervalId","setInterval","clearInterval","Component","Results","search","print","download","viewColumns","selectableRows","rowsPerPage","customFooter","count","page","changeRowsPerPage","changePage","TableFooter","result","StopSearch_Timer","dist_default","title","columns","useStyles","makeStyles","theme","root","padding","StopSearchPage","useEffect","classes","Paper","className","StopSearch_VehicleModeFilter","StopSearch_DateSelection","StopSearch_LineSelection","StopSearch_StopSelection","style","textAlign","SearchButton","StopSearch_Results","StopSearch","StopSearchInitialState","stopSearchProvider_StopSearchProvider","StopSearch_StopSearchPage","App","react_router_dom","react_router","exact","path","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e2544a13.chunk.js","sourcesContent":["const stopSearchReducer = (state, action) => {\n  switch (action.type) {\n    // Action : setLines\n    case 'setLines':\n      let lines = action.data.LinesDelivery.AnnotatedLineRef.map((line) => {\n        return {\n          LineRef: line.LineRef,\n          LineName: line.LineName,\n          RouteType: line.Extension.RouteType\n        }\n      });\n\n      return {\n        ...state,\n        lines: lines\n      };\n\n    // Action : setStops\n    case 'setStops':\n      let stops = [];\n      let stopsIds = {};\n\n      action.data.ServiceDelivery.EstimatedTimetableDelivery.map((Etd) => {\n        Etd.EstimatedJourneyVersionFrame.map((Ejvf) => {\n          Ejvf.EstimatedVehicleJourney.map((Evj) => {\n            let LineRef       = Evj.LineRef;\n            let DirectionRef  = Evj.DirectionRef;\n            let VehicleMode   = Evj.Extension.VehicleMode;\n\n            Evj.EstimatedCalls.map((Ec) => {\n              if (stopsIds[Ec.StopPointRef]) {\n                return false;\n              }\n\n              stops.push({\n                LineRef: LineRef,\n                DirectionRef: DirectionRef,\n                StopPointRef: Ec.StopPointRef,\n                StopPointName: Ec.StopPointName,\n                DestinationName: Ec.DestinationName,\n                VehicleMode: VehicleMode\n              });\n\n              stopsIds[Ec.StopPointRef] = true;\n\n              return false;\n            });\n\n            return false;\n          });\n          return false;\n        });\n        return false;\n      });\n\n      return {\n        ...state,\n        stops: stops\n      };\n\n    // Action : VehicleModeFilter\n    case 'VehicleModeFilter':\n      let VehicleMode = state.VehicleMode;\n      VehicleMode[action.data.mode] = action.data.checked;\n\n      return {\n        ...state,\n        VehicleMode: VehicleMode\n      }\n\n    // Action : LineSelection\n    case 'LineSelection':\n      return {\n        ...state,\n        line: action.data.line\n      }\n\n    // Action : StopSelection\n    case 'StopSelection':\n      return {\n        ...state,\n        stop: action.data.stop\n      }\n\n    // Action : DateSelection\n    case 'DateSelection':\n      return {\n        ...state,\n        date: action.data.date\n      }\n\n    // Action : Search\n    case 'Search':\n      let results = [];\n\n      if (typeof(action.data.ServiceDelivery.StopMonitoringDelivery[0].MonitoredStopVisit) === 'undefined') {\n        return {\n          ...state,\n          results: results\n        }\n      }\n\n      action.data.ServiceDelivery.StopMonitoringDelivery[0].MonitoredStopVisit.map((visit) => {\n        let journey = visit.MonitoredVehicleJourney;\n        let call = journey.MonitoredCall;\n\n        results.push({\n          DestinationName: journey.DestinationName,\n          LineRef: journey.LineRef,\n          VehicleMode: journey.VehicleMode,\n          IsRealTime: call.Extension.IsRealTime,\n          StopPointName: call.StopPointName,\n          ExpectedArrivalTime: call.ExpectedArrivalTime,\n          ExpectedDepartureTime: call.ExpectedDepartureTime\n        });\n\n        return false;\n      });\n\n      return {\n        ...state,\n        results: results\n      }\n\n      // Action : maxStopArrivalsSelection\n      case 'maxStopArrivalsSelection':\n        return {\n          ...state,\n          maxStopArrivals: action.data.maxStopArrivals\n        }\n\n    // Action : default\n    default:\n      throw new Error();\n  }\n};\n\nexport { stopSearchReducer };\n","import React, { createContext, useReducer } from \"react\";\nimport { stopSearchReducer } from \"../reducers/stopSearchReducer\";\n\nconst StopSearchContext = createContext({});\n\nconst StopSearchProvider = ({ children, initialState }) => {\n  const [state, dispatch] = useReducer(stopSearchReducer, initialState);\n  const context = { state, dispatch };\n  return (\n    <StopSearchContext.Provider value={context}>{children}</StopSearchContext.Provider>\n  );\n};\n\nexport { StopSearchContext, StopSearchProvider };","import axios from 'axios';\n\nvar token     = '27fc0b07-5e85-41de-a749-338e1a00e4e8';\nvar $apiUrl   = 'https://api.cts-strasbourg.eu/v1/siri/2.0/';\n\nconst api = axios.create({\n  baseURL: $apiUrl,\n});\n\nconst client = (route, params) => (\n  api.get(route, {\n    params: params.params,\n    auth: {\n      username: token\n    }\n  }).then((res) => {\n    let data = res.data;\n    params.dispatch({type: params.type, data: data})\n  }).catch(function (error) {\n    alert(error);\n  })\n);\n\nexport default client;","import client from './client';\n\nconst linesDiscovery = async ($params) => (\n  await client('lines-discovery', $params)\n);\n\nexport default linesDiscovery;","import client from './client';\n\nconst estimatedTimetable = async ($params) => (\n  await client('estimated-timetable', $params)\n);\n\nexport default estimatedTimetable;","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport { FormControlLabel, FormLabel, Checkbox } from '@material-ui/core';\n\nconst VehicleModeFilter = () => {\n  const { state: { VehicleMode }, dispatch } = useContext(StopSearchContext);\n\n  const handleChange = mode => event => {\n    dispatch({type: 'VehicleModeFilter', data: {mode: mode, checked: event.target.checked}});\n  };\n\n  return (\n    <div>\n      <FormLabel component=\"legend\">Type de transport</FormLabel>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={VehicleMode.bus}\n            onChange={handleChange('bus')}\n            value=\"bus\"\n            color=\"primary\"\n          />\n        }\n        label=\"Bus\"\n      />\n\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={VehicleMode.tram}\n            onChange={handleChange('tram')}\n            value=\"tram\"\n            color=\"primary\"\n          />\n        }\n        label=\"Tram\"\n      />\n    </div>\n  );\n}\n\nexport default VehicleModeFilter;\n","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport Select from 'react-select';\nimport { FormLabel } from '@material-ui/core';\n\nconst LineSelection = () => {\n  const { state: { lines, line, VehicleMode }, dispatch } = useContext(StopSearchContext);\n\n  const options = lines.filter((line) => {\n    if (VehicleMode[line.RouteType]) {\n      return true;\n    }\n    return false;\n  }).map(line => ({\n    value: line.LineRef,\n    label: line.RouteType+' '+line.LineRef+ ' - '+line.LineName\n  }));\n\n  const value = options.find(element => {\n    return element.value === line;\n  });\n\n  const handleChange = selected => {\n    dispatch({type: 'LineSelection', data: {line: selected.value}});\n  };\n\n  const selectStyles = { menu: styles => ({ ...styles, zIndex: 999 }) };\n\n  return (\n    <div>\n      <FormLabel component=\"legend\">Ligne</FormLabel>\n      <Select\n        value={value}\n        onChange={handleChange}\n        options={options}\n        styles={selectStyles}\n      />\n    </div>\n  );\n}\n\nexport default LineSelection;\n","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport Select from 'react-select';\nimport { FormLabel } from '@material-ui/core';\n\nconst StopSelection = () => {\n  const { state: { stops, stop, line }, dispatch } = useContext(StopSearchContext);\n\n  const options = stops.filter((stop) => {\n    if (stop.LineRef === line) {\n      return true;\n    }\n    return false;\n  }).map(stop => ({\n    value: stop.StopPointRef,\n    label: stop.VehicleMode+' '+stop.LineRef+' - '+stop.StopPointName+ ' => '+stop.DestinationName\n  }));\n\n  const value = options.find(element => {\n    return element.value === stop;\n  });\n\n  const handleChange = selected => {\n    dispatch({type: 'StopSelection', data: {stop: selected.value}});\n  };\n\n  const selectStyles = { menu: styles => ({ ...styles, zIndex: 999 }) };\n\n  let select = '';\n  if (options.length > 0) {\n    select =\n      <div>\n        <FormLabel component=\"legend\">Arrêt</FormLabel>\n        <Select\n          value={value}\n          onChange={handleChange}\n          options={options}\n          styles={selectStyles}\n        />\n      </div>\n  }\n\n  return (\n    <div>\n      {select}\n    </div>\n  );\n}\n\nexport default StopSelection;\n","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport { FormLabel } from '@material-ui/core';\nimport DateFnsUtils from '@date-io/date-fns';\nimport locale from 'date-fns/locale/fr';\nimport {\n  MuiPickersUtilsProvider,\n  TimePicker\n} from '@material-ui/pickers';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUndo } from '@fortawesome/free-solid-svg-icons';\n\nconst DateSelection = () => {\n  const { state: { date, stop }, dispatch } = useContext(StopSearchContext);\n\n  const handleChange = date => {\n    dispatch({type: 'DateSelection', data: {date: date}});\n  };\n\n  const handleReset = () => {\n    dispatch({type: 'DateSelection', data: {date: new Date()}});\n  }\n\n  if (stop === null) {\n    return <div></div>;\n  }\n\n  return (\n    <div>\n      <FormLabel component=\"legend\">Horaire</FormLabel>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid key='MuiPickersUtilsProvider' item xs={6}>\n          <MuiPickersUtilsProvider utils={DateFnsUtils} locale={locale}>\n            <TimePicker\n              id=\"mui-pickers-time\"\n              ampm={false}\n              variant=\"inline\"\n              value={date}\n              onChange={handleChange}\n            />\n          </MuiPickersUtilsProvider>\n        </Grid>\n        <Grid key='button' item xs={6}>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleReset}>\n            <FontAwesomeIcon icon={faUndo} />\n          </Button>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nexport default DateSelection;\n","import client from './client';\n\nconst stopMonitoring = async ($params) => (\n  await client('stop-monitoring', $params)\n);\n\nexport default stopMonitoring;","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport Button from '@material-ui/core/Button';\n\nimport stopMonitoring from '../../services/stopMonitoring';\n\nconst DateSelection = () => {\n  const { state: { stop, date, line, maxStopArrivals }, dispatch } = useContext(StopSearchContext);\n\n  const handleChange = () => {\n    stopMonitoring({\n      dispatch: dispatch,\n      type: 'Search',\n      params: {\n        MonitoringRef: stop,\n        LineRef: line,\n        StartTime: date,\n        MaximumStopVisits: maxStopArrivals\n      }\n    });\n\n  };\n\n  if (stop === null) {\n    return <div></div>;\n  }\n\n  return (\n    <Button variant=\"contained\" color=\"primary\" onClick={handleChange}>\n      Rechercher\n    </Button>\n  );\n}\n\nexport default DateSelection;\n","import React, { Component } from 'react';\nimport moment from 'moment';\n\nclass Timer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.date = moment(props.date);\n    this.intervalId = null;\n\n    this.state = {\n      visibleDate: this.calculate()\n    };\n  }\n\n  dateUpdate = () => {\n    this.setState({\n      visibleDate: this.calculate()\n    });\n  }\n\n  calculate = () => {\n    let diff = this.date.diff(moment());\n    if (diff < 0) {\n      return this.props.finishedText;\n    }\n    return moment.utc(diff).format(\"HH:mm:ss\");\n  }\n\n  componentDidUpdate() {\n    this.date = moment(this.props.date);\n  }\n\n  componentDidMount() {\n    this.intervalId = setInterval(this.dateUpdate, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.visibleDate}\n      </div>\n    );\n  }\n}\n\nexport default Timer;\n","import React, { useContext } from 'react';\nimport { StopSearchContext } from '../../providers/stopSearchProvider';\nimport MUIDataTable from \"mui-datatables\";\nimport TableFooter from \"@material-ui/core/TableFooter\";\nimport moment from 'moment';\n\nimport Timer from \"./Timer\";\n\nconst Results = () => {\n  const { state: { results } } = useContext(StopSearchContext);\n\n  const options = {\n    filter: false,\n    search: false,\n    print: false,\n    download: false,\n    viewColumns: false,\n    selectableRows: 'none',\n    rowsPerPage: 100,\n    customFooter: (\n      count,\n      page,\n      rowsPerPage,\n      changeRowsPerPage,\n      changePage\n    ) => {\n      return <TableFooter></TableFooter>;\n    }\n  };\n\n  const columns = [\n    \"Ligne\",\n    \"Arrêt\",\n    \"Destination\",\n    \"Temps réel\",\n    \"Arrivée\",\n    \"Départ\",\n    \"Arrivée dans\",\n    \"Départ dans\"\n  ];\n\n  const data = results.map((result) => {\n    let element = [\n      result.VehicleMode+' '+result.LineRef,\n      result.StopPointName,\n      result.DestinationName,\n      result.IsRealTime === true ? \"Oui\" : \"Non\",\n      moment(result.ExpectedArrivalTime).format('DD/MM/YYYY HH:mm:ss'),\n      moment(result.ExpectedDepartureTime).format('DD/MM/YYYY HH:mm:ss'),\n      <Timer date={result.ExpectedArrivalTime} finishedText=\"Arrivé\" />,\n      <Timer date={result.ExpectedDepartureTime} finishedText=\"Passé\" />\n      //moment.utc(moment(result.ExpectedArrivalTime).diff(moment())).format(\"HH:mm:ss\")\n    ];\n\n    return element;\n  });\n\n  if (results.length === 0) {\n    return <div></div>;\n  }\n\n  return (\n    <div>\n      <br />\n      <MUIDataTable\n        title={\"Liste des horaires\"}\n        data={data}\n        columns={columns}\n        options={options}\n      />\n    </div>\n  );\n}\n\nexport default Results;\n","import React, { useContext, useEffect } from 'react';\nimport { StopSearchContext, StopSearchProvider } from '../providers/stopSearchProvider';\nimport linesDiscovery from '../services/linesDiscovery';\nimport estimatedTimetable from '../services/estimatedTimetable';\n\nimport VehicleModeFilter from './StopSearch/VehicleModeFilter';\nimport LineSelection from './StopSearch/LineSelection';\nimport StopSelection from './StopSearch/StopSelection';\nimport DateSelection from './StopSearch/DateSelection';\nimport SearchButton from './StopSearch/SearchButton';\nimport Results from './StopSearch/Results';\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(3, 2),\n  },\n}));\n\nconst StopSearchPage = () => {\n  const { dispatch } = useContext(StopSearchContext);\n\n  useEffect(() => {\n    linesDiscovery({\n      dispatch: dispatch,\n      type: 'setLines',\n      params: {}\n    });\n\n    estimatedTimetable({\n      dispatch: dispatch,\n      type: 'setStops',\n      params: {}\n    });\n  }, [dispatch]);\n\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.root}>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Grid container justify=\"center\" spacing={2}>\n            <Grid key='VehicleModeFilter' item xs={6}>\n              <VehicleModeFilter />\n            </Grid>\n            <Grid key='DateSelection' item xs={6}>\n              <DateSelection />\n            </Grid>\n          </Grid>\n          <Grid container justify=\"center\" spacing={2}>\n            <Grid key='LineSelection' item xs={12}>\n              <LineSelection />\n            </Grid>\n          </Grid>\n          <Grid container justify=\"center\" spacing={2}>\n            <Grid key='LineSelection' item xs={12}>\n              <StopSelection />\n            </Grid>\n          </Grid>\n          <Grid container justify=\"center\" spacing={2}>\n            <Grid key='LineSelection' item xs={12} style={{textAlign: \"center\"}}>\n              <SearchButton />\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n\n      <Results />\n    </Paper>\n  );\n}\n\nconst StopSearch = () => {\n  const StopSearchInitialState = {\n    lines: [],\n    stops: [],\n    VehicleMode: {\n      bus: true,\n      tram: true\n    },\n    line: null,\n    stop: null,\n    date: new Date(),\n    results: [],\n    maxStopArrivals: 5\n  };\n\n  return (\n    <StopSearchProvider initialState={StopSearchInitialState}>\n      <StopSearchPage />\n    </StopSearchProvider>\n  );\n}\n\nexport default StopSearch;\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport StopSearch from './pages/StopSearch';\n\nfunction App() {\n  return (\n    <Router>\n      <Route exact path=\"/\" component={StopSearch} />\n      <Route exact path=\"/cts-2019/\" component={StopSearch} />\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}